<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cesta - VogueCrest</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; background: #fff; color: #111; margin: 0; padding: 0; }
header { display: flex; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid #e5e5e5; background: #fff; position: sticky; top: 0; z-index: 100; }
.menu-toggle, .cesta { width: 80px; font-weight: 600; cursor: pointer; }
.menu-toggle { text-align: left; }
.cesta { text-align: right; }
.logo-container { flex: 1; text-align: center; }
.logo { height: 50px; object-fit: contain; }
.menu { position: absolute; top: 70px; left: 0; right: 0; background: #fff; flex-direction: column; gap: 1rem; padding: 1rem 2rem; display: none; border-bottom: 1px solid #e5e5e5; z-index: 99; }
.menu.show { display: flex; }
.menu a { text-decoration: none; color: #111; font-weight: 500; transition: color 0.2s; }
.menu a:hover { color: #555; }

main { max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
.producto-card { display: flex; flex-wrap: wrap; align-items: center; padding: 1rem; margin-bottom: 1rem; gap: 1rem; }
.producto-card img { width: 100px; border-radius: 5px; flex-shrink: 0; }
.producto-info { flex: 1; display: flex; flex-direction: column; gap: 0.4rem; }
.producto-info div { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; }
.color-circle { width: 20px; height: 20px; border-radius: 50%; border: 1px solid #111; display: inline-block; }
.precio { font-weight: 700; }
.btn-eliminar { padding: 0.4rem 0.8rem; background: #111; color: #fff; border: none; border-radius: 5px; cursor: pointer; width: fit-content; }
.btn-eliminar:hover { background: #333; }
.total { text-align: right; font-weight: 700; margin-top: 1rem; font-size: 1.2rem; }
.pagar-btn { display: block; margin: 1rem 0; padding: 1rem 2rem; background: #25D366; color: #fff; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; text-align: center; font-size: 1rem; text-decoration: none; width: 100%; max-width: 300px; }
.pagar-btn:hover { background: #128C7E; }

@media(max-width:600px){
  .producto-card { flex-direction: column; align-items: flex-start; }
  .producto-card img { width: 100%; max-width: 200px; }
}
</style>
</head>
<body>

<header>
  <div class="menu-toggle" id="menu-toggle">Menu</div>
  <div class="logo-container"><img src="100.png" alt="VogueCrest" class="logo"></div>
  <div class="cesta" onclick="window.location.href='cesta.html'">Cesta (<span id="cart-count">0</span>)</div>

  <nav class="menu" id="menu">
    <a href="index.html">Inicio</a>
    <a href="colecciones.html">Colecciones</a>
    <a href="cesta.html">Cesta</a>
  </nav>
</header>

<main>
  <h2>Tu Cesta</h2>
  <div id="cart-container"></div>
  <p class="total" id="total">Total: C$0.00</p>
  <button class="pagar-btn" id="pagar-whatsapp">Pagar por WhatsApp</button>
</main>

<script>
// Menu toggle
document.getElementById('menu-toggle').addEventListener('click', () => {
  document.getElementById('menu').classList.toggle('show');
});

function loadCart() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const container = document.getElementById('cart-container');
  container.innerHTML = '';
  let total = 0;

  cart.forEach((item,index)=>{
    const card = document.createElement('div');
    card.className = 'producto-card';
    card.innerHTML = `
      <img src="${item.imagen}" alt="${item.name}">
      <div class="producto-info">
        <div><strong>Producto:</strong> ${item.name}</div>
        <div><strong>Color:</strong> ${item.color}</div>
        <div><strong>Talla:</strong> ${item.talla}</div>
        <div><strong>Cantidad:</strong> ${item.cantidad}</div>
        <div class="precio"><strong>Subtotal:</strong> C$${(item.price*item.cantidad).toFixed(2)}</div>
        <button class="btn-eliminar" onclick="removeItem(${index})">Eliminar</button>
      </div>
    `;
    container.appendChild(card);
    total += item.price*item.cantidad;
  });

  document.getElementById('total').textContent = 'Total: C$' + total.toFixed(2);
  document.getElementById('cart-count').textContent = cart.length;
}

function removeItem(index){
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  cart.splice(index,1);
  localStorage.setItem('cart',JSON.stringify(cart));
  loadCart();
}

// WhatsApp con formato bonito
document.getElementById('pagar-whatsapp').addEventListener('click',()=>{
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  if(cart.length===0){ alert('Tu carrito está vacío'); return; }

  let mensaje = 'Hola! Quiero realizar esta compra desde VogueCrest:%0A%0A';
  cart.forEach((item,i)=>{
    mensaje += `🛍️ ${item.name}%0A`;
    mensaje += `Imagen: ${window.location.origin}/${item.imagen}%0A`;
    mensaje += `Talla: ${item.talla} | Color: ${item.color}%0A`;
    mensaje += `Cantidad: ${item.cantidad}%0A`;
    mensaje += `Subtotal: C$${(item.price*item.cantidad).toFixed(2)}%0A%0A`;
  });
  const total = cart.reduce((acc,item)=>acc+item.price*item.cantidad,0);
  mensaje += `🔢 Total: C$${total.toFixed(2)}%0A%0A`;
  mensaje += '📦 Por favor, confírmame disponibilidad y detalles de entrega.';

  const telefono = '50582337242'; // Cambia al número de VogueCrest
  window.open(`https://wa.me/${telefono}?text=${mensaje}`,'_blank');
});

loadCart();
</script>

</body>
</html>
